<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
<title>SvgEditor</title>
<style>
*,body {
box-sizing:border-box;
margin:0;
padding: 0px;
background: #ccc;
}
#resizable {
overflow:hidden;
width: 337px;
min-width: 100px;
max-width: 100vw;
height:429;
min-height: 50px;
background: #f9f9f9;
position: relative;
}
#handle{
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' shape-rendering='geometricPrecision' text-rendering='geometricPrecision' image-rendering='optimizeQuality' fill-rule='evenodd' clip-rule='evenodd' viewBox='0 0 512 512'%3E%3Cpath fill-rule='nonzero' d='M318.633 104.048h-49.644v94.774c22.158 5.014 39.533 22.56 44.319 44.772h94.644v-78.986L512 256l-104.048 91.392V268.989h-94.774c-4.968 21.952-22.237 39.221-44.189 44.189v94.774h78.403L256 512l-91.392-104.048H243.594v-94.644c-22.212-4.786-39.758-22.161-44.772-44.319h-94.774v78.403L0 256l104.048-91.392V243.594h94.644c4.83-22.419 22.483-40.072 44.902-44.902v-94.644h-78.986L256 0l91.392 104.048h-28.759z'/%3E%3C/svg%3E");
color:rgba(0,0,0,0.1);
width:30px;
height:30px;
position: absolute;
right:0;
bottom:0;
cursor: se-resize;
touch-action: none;
border:2px solid #fff;
border-radius: 4px;
}

#sizeDisplay {
position: absolute;
top: 5px;
left: 5px;
background: rgba(0,0,0,0.6);
color: #fff;
padding: 2px 6px;
font-size: 12px;
border-radius: 2px;
pointer-events: none;
}
nav{
display:flex;
position:fixed;
left:0;bottom:0;
width:100%;
}
nav button,
.toggle-label{
text-align:center;
flex:1;display:inline-block;
padding: 8px;
background-color: #007BFF;
color: white;
cursor: pointer;
border-radius: 4px;
border:2px solid #ccc;
font-size:16px;
}
.toggle-label::after{content:"⟱⟱⟱";}
:root, html, body {
width: 100vw;
height: 100vh;
box-sizing: border-box;
padding: 0;
margin: 0;
}
input {
width:100%;
margin: 0;
padding: 5px 0;
}
#svg{
box-sizing: border-box;
background:#fff;
}
#toggle {
display: none;
}
/* Content to show/hide */
.toggle-content {
display:none;
background:rgba(0,0,0,0.6);
box-sizing: border-box;
width:100%;
margin:0px;
padding:20px;
border-radius: 5px;
}
.range-slider,.range-value{
background:transparent;
color:#fff;

}
/* Show content when checkbox is checked */
#toggle:checked + .toggle-label + .toggle-content {
display: block;
}
#toggle:checked + .toggle-label::after{content:"⟰⟰⟰";}

#display{
pisition:relative;
width: 337px;
min-width: 100px;
max-width: 100vw;
height:429;
min-height: 50px;
color:black;
background: #red;
}
#text{
width: 337px;
min-width: 100px;
max-width: 100vw;
height:429;
min-height: 50px;
padding:5px;
background:rgba(0,0,0,0.8);
color:coral;
line-height:12px;
font-size:12px;
white-space:pre-wrap;
overflow:scroll;
resize:none;
outline:none;
}
#notif{
margin:10px;
position:absolute;
background:rgba(0,0,0,0.7);
color:#fff;
}
</style>
<script src='../jquery.js'></script>
</head>
<body>
<div id="resizable">
<div id="sizeDisplay"></div>
<div id="handle">▒</div>

<svg xmlns="http://www.w3.org/2000/svg" id="svg" width="355" height="538">
<path id="path" class="path" stroke="#ff00ff" stroke-width="4" fill="#00ffff" d="M 87 250 L 87 250 L 87 250 L 87 245 L 88 238 L 88 228 L 87 218 L 84 208 L 81 201 L 78 196 L 75 193 L 72 191 L 70 190 L 68 189 L 66 190 L 62 190 L 56 192 L 48 196 L 38 203 L 31 209 L 27 214 L 25 218 L 24 223 L 24 229 L 24 236 L 26 244 L 30 251 L 35 258 L 42 263 L 50 268 L 58 271 L 67 273 L 77 274 L 88 275 L 99 277 L 108 279 L 114 281 L 117 284 L 119 287 L 120 291 L 120 297 L 118 307 L 113 318 L 107 329 L 101 337 L 94 345 L 87 350 L 80 355 L 73 358 L 67 360 L 62 360 L 56 360 L 49 356 L 41 349 L 32 333 L 26 316 L 23 302 L 23 295 L 24 294 L 27 294 L 29 295M 178 247 L 178 247 L 178 247 L 176 243 L 174 239 L 172 233 L 169 225 L 166 216 L 164 209 L 161 204 L 158 201 L 156 199 L 154 198 L 152 197 L 150 197 L 147 196 L 144 196 L 141 197 L 139 198 L 136 199 L 135 200 L 133 202 L 132 203 L 130 205 L 128 209 L 126 214 L 126 219 L 125 225 L 125 231 L 125 237 L 127 245 L 129 251 L 132 259 L 135 267 L 139 273 L 142 281 L 145 287 L 148 295 L 151 302 L 154 309 L 157 316 L 159 321 L 160 325 L 161 328 L 162 332 L 163 334 L 164 337 L 164 338 L 165 339 L 165 340 L 166 341 L 166 341 L 167 341 L 167 341 L 167 340 L 168 340 L 169 338 L 171 334 L 176 327 L 182 319 L 189 309 L 196 300 L 202 292 L 209 282 L 216 273 L 224 265 L 230 259 L 235 253 L 239 246 L 242 239 L 244 232 L 245 224 L 246 219 L 245 214 L 244 209 L 243 203 L 241 197 L 238 192 L 235 188 L 232 186 L 228 185 L 226 184 L 223 184 L 219 184 L 215 185 L 210 187 L 207 190 L 203 194 L 197 200 L 191 209 L 184 218 L 175 229M 303 255 L 303 255 L 305 255 L 308 253 L 311 250 L 314 245 L 318 235 L 321 223 L 322 212 L 323 204 L 324 200 L 323 198 L 323 195 L 322 194 L 322 192 L 322 190 L 321 188 L 320 186 L 319 185 L 317 184 L 315 183 L 313 183 L 310 183 L 308 183 L 306 184 L 304 185 L 301 187 L 298 188 L 295 190 L 292 193 L 289 195 L 286 199 L 282 203 L 278 208 L 273 214 L 270 219 L 266 225 L 262 231 L 259 239 L 256 248 L 253 256 L 250 263 L 248 271 L 246 278 L 244 285 L 242 293 L 241 300 L 239 307 L 239 314 L 239 321 L 240 327 L 241 332 L 242 335 L 244 338 L 246 340 L 249 342 L 255 344 L 265 345 L 274 344 L 282 341 L 288 338 L 293 335 L 296 333 L 298 330 L 301 327 L 305 321 L 309 317 L 312 312 L 313 308 L 314 306 L 313 303 L 313 300 L 311 296 L 309 292 L 306 289 L 303 285 L 300 283 L 296 282 L 293 280 L 290 280 L 286 280 L 282 282 L 279 285 L 275 290 L 274 294"/>
<circle id="circle" cx="0" cy="0" r="8" fill="#00ff00" stroke="#c26936" stroke-width="6">
<animateMotion dur="7" repeatCount="indefinite">
<mpath href="#path"/>
</animateMotion>
</circle>
</svg>

</div>
</div>
<nav>
<button id="copy">Copy</button>
<button id="download">Download</button>
<button id="reset">Clear</button>
<input type="checkbox" id="toggle">
<label for="toggle" class="toggle-label"> </label>

<div id="tools" class="toggle-content" style="position: fixed; left: 0; top: 0; z-index: 1;">
<div class="range-slider">
path stroke size: <span class="range-value">10</span>
<input class="input-range" type="range" id="pSize" value="5" min="1" max="50">
</div>
<div class="range-slider">
path stroke:<input type="color" id="pSc" value="#ff00ff"><br>
path Fill: <input type="color" id="pFill" value="#00ffff">
</div>
<br><br>
<div class="range-slider">
circle Stroke width: <span class="range-value">5</span>
<input class="input-range" type="range" id="cSw" value="5" min="1" max="50">
circle Stroke:<input type="color" id="cSc" value="#c26936">
</div>
<br><br>
<div class="range-slider">
circle R size: <span class="range-value">5</span>
<input class="input-range" type="range" id="circleR" value="5" min="1" max="50">
circle Fill: <input type="color" id="cFill" value="#00ff00"><br>
</div>
<br><br>
<div class="range-slider">
durasi: <span class="range-value">5</span>
<input class="input-range" type="range" id="dur" value="5" min="1" max="30">

</div>
</nav>
<div id="display">
<p style="font-size:12px">Editor text: note edit manual ketika anda benar2 sudah menggambar nya, karna kalau menggambar dan mengedit secara bergantian akan menduplikat <br>ini: [&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; id=&quot;svg&quot; width=&quot;xxx&quot; height=&quot;xxx&quot;&gt;]
<br>dan ini [&lt;/svg&gt;] Terkecuali anda menghapus manual di akhir pengeditan.</p>
<p id="notif"></p>
<textarea id="text"></textarea>
<p id="panjang"></p></div>
</div>
<script>
function vs(hex) {
  const r = parseInt(hex.slice(1, 3), 16);
  const g = parseInt(hex.slice(3, 5), 16);
  const b = parseInt(hex.slice(5, 7), 16);
  const brightness = (r * 299 + g * 587 + b * 114) / 1000;
  return brightness > 128 ? "silver" : "coral";
}

$('#copy').on('click', () => {navigator.clipboard.writeText($('#text').val());
$('#notif').text('✅ Berhasil di-copy').fadeIn();
setTimeout(() => {$('#notif').fadeOut(() => $('#notif').text(''))}, 2000)});
const svg = $('#svg')[0];
const $resizable = $('#resizable');
const $handle = $('#handle');
let isResizing = false;
let newWidth = $resizable.width();
let newHeight = $resizable.height();
const updateSizeDisplay = () => {
$('#sizeDisplay').text(`${Math.round(newWidth)}px × ${Math.round(newHeight)}px`);
const serializer = new XMLSerializer();
let source = serializer.serializeToString(svg);
$('#text').val(source);
};
const sendSizeAndUpdate = () => {
const data = { width: Math.round(newWidth), height: Math.round(newHeight) };
$.post("http://192.168.43.25:5000/save-size", JSON.stringify(data), null, "json")
.then(() => $.get("http://192.168.43.25:5000/dynamic-html"));
};
const startResize = (e) => {
isResizing = true;
const startX = e.clientX || e.originalEvent.touches[0].clientX;
const startY = e.clientY || e.originalEvent.touches[0].clientY;
const startWidth = $resizable.width();
const startHeight = $resizable.height();
const doResize = (moveEvent) => {
if (!isResizing) return;
const moveX = moveEvent.clientX || moveEvent.originalEvent.touches[0].clientX;
const moveY = moveEvent.clientY || moveEvent.originalEvent.touches[0].clientY;
newWidth = startWidth + (moveX - startX);
newHeight = startHeight + (moveY - startY);
$resizable.css({ width: newWidth, height: newHeight });
$('#svg').attr({ width: Math.round(newWidth), height: Math.round(newHeight) });
$('#display,#text').css({ width: Math.round(newWidth), height: Math.round(newHeight)});
updateSizeDisplay();
};
const stopResize = () => {
isResizing = false;
$(window).off('mousemove touchmove', doResize);
$(window).off('mouseup touchend', stopResize);
updateSizeDisplay();
sendSizeAndUpdate();
};
$(window).on('mousemove touchmove', doResize);
$(window).on('mouseup touchend', stopResize);
};
$('#handle').on('mousedown touchstart', startResize);
updateSizeDisplay();
sendSizeAndUpdate();
$('.input-range').on('input', function(){
$(this).prev('.range-value').text(this.value);
const serializer = new XMLSerializer();
let source = serializer.serializeToString(svg);
$('#text').val(source);
});
let isDrawing = false;
let pathData = '';
$('#reset').click(function() {
pathData = '';
$('#path').attr('d', '');
$('#text').val("");
$('#panjang').text("");
});
const getLocalCoords = (event) => {
  const touch = event.originalEvent.touches ? event.originalEvent.touches[0] : event;
  const svgRect = svg.getBoundingClientRect();
  const x = touch.clientX - svgRect.left;
  const y = touch.clientY - svgRect.top;
  return { x, y };
};

const isInsideSVG = ({ x, y }) => {
  return x >= 0 && y >= 0 && x <= svg.width.baseVal.value && y <= svg.height.baseVal.value;
};

const startDrawing = (event) => {
  const { x, y } = getLocalCoords(event);
  if (!isInsideSVG({ x, y })) return;

  isDrawing = true;
  pathData += `M ${Math.round(x)} ${Math.round(y)}`;
  $('path').attr('d', pathData);
  event.preventDefault();

  const serializer = new XMLSerializer();
  let source = serializer.serializeToString(svg);
  $('#text').val(source);
};
const updatePathLength = () => {
  const path = document.getElementById('path');
  const length = path.getTotalLength();
  $('#panjang').text(`Panjang: ${Math.round(length)}`);

};
const draw = (event) => {
  if (!isDrawing) return;
  const { x, y } = getLocalCoords(event);
  if (!isInsideSVG({ x, y })) return;

  pathData += ` L ${Math.round(x)} ${Math.round(y)}`;
  $('#path').attr('d', pathData);

  const serializer = new XMLSerializer();
  let source = serializer.serializeToString(svg);
  $('#text').val(source);
  updatePathLength(); 
};
const stopDrawing = () => { isDrawing = false; };
$('#svg').on('touchstart mousedown', startDrawing);
$('#svg').on('touchmove mousemove', draw);
$('#svg').on('touchend touchcancel mouseup mouseleave', stopDrawing);
$('#pSize').on('input', function() { $('#path').attr('stroke-width', this.value); });
$('#pFill').on('input', function() { $('#path').attr('fill', this.value); });
$('#pSc').on('input', function() { $('#path').attr('stroke', this.value); });
$('#cSw').on('input', function() { $('circle').attr('stroke-width', this.value); });
$('#circleR').on('input', function() { $('circle').attr('r', this.value); });
$('#cFill').on('input', function() { $('circle').attr('fill',this.value); });
$('#cSc').on('input', function() { $('circle').attr('stroke', this.value); });
$('#dur').on('input', function() { $('animateMotion').attr('dur',this.value)});
$('#download').on('click', () => {
const serializer = new XMLSerializer();
let source = serializer.serializeToString(svg);
const blob = new Blob([source], { type: 'image/svg+xml' });
const url = URL.createObjectURL(blob);
const $a = $('<a>').attr('href', url).attr('download', 'image.svg').appendTo('body');
$a[0].click();
$a.remove();
URL.revokeObjectURL(url);
});
$('#text').on('input', function () {
  const svgMarkup = $(this).val();
  $('#svg').html(svgMarkup); 
});	
</script>
</body>
	</html>
